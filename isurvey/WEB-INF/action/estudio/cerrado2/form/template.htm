<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" type="text/css" href="${def:context}/default.css" />

<!--biblioteca generica JS/Dinamica-->
<script type="text/javascript" src="${def:context}/action/script">
</script>

<title>iSurvey</title>

</head>
<body>

<div align="center">
<img src="${def:context}/images/logos_empresas/${fld:logo}" width="188" height="188" alt="logo" style="float: center; width=30%; margin-right: 1% margin-bottom: 0.5em;">
<img src="${def:context}/images/banners_estudios/${fld:banner}" width="700" height="188" alt="banner" style="float: center; width=30%; margin-right: 1% margin-bottom: 0.5em;">
<br>
<br>
<h2 id="mensaje" hidden>Disculpe las molestias, el Estudio se encuentra deshabilitado en este momento</h2>
</div>
<!--panel de respuesta AJAX para el grid paginado-->
<div id="response" style="display: none; width: 100%" align="center"></div>

</body>
<script type="text/javascript">

	//inicializa cuando se carga la pagina
	onload = function()
	{
		if ('${fld:estatus_estudio}' == "Pausado") {
			document.getElementById('mensaje').hidden = false;
		} 
		else{
			search();
		};

	} 

		//ejecutar consulta y mostrar grid, si hay data viewPage() sera invocada automaticamente
	function search()
	{
		var url = "${def:actionroot}/search";
		
		//determina si refresca y se para en la pagina actual o en la pagina 1
		if (currentPage > 0)
			url = "${def:actionroot}/search?currentpage=" + currentPage;

		//llamada Ajax...
		ajaxCall(httpMethod="GET", 
						uri= url, 
						divResponse="response", 
						divProgress="status", 
						formName=null, 
						afterResponseFn=null, 
						onErrorFn=null);
	}

		//traer la pagina N del grid
	function viewPage()
	{
		var url = "${def:actionroot}/view";
		gotoPage(url);
	}	
	</script>
</html>